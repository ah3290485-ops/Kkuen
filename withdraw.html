
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ Ø³Ø­Ø¨</title>
<link rel="stylesheet" href="style.css">
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script src="supabase.js"></script>
</head>

<body>
<div class="container">
  <h2>ğŸ’¸ Ø·Ù„Ø¨ Ø³Ø­Ø¨</h2>

  <input type="number" id="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" />
  <input type="text" id="wallet" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©" />

  <button onclick="withdraw()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>

  <p id="msg"></p>

  <a href="dashboard.html">â¬…ï¸ Ø±Ø¬ÙˆØ¹</a>
</div>

<script>
async function withdraw() {
  const amount = document.getElementById("amount").value;
  const wallet = document.getElementById("wallet").value;

  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");
    return;
  }

  const { error } = await supabase
    .from("withdrawals")
    .insert([{
      user_id: user.id,
      amount: amount,
      wallet: wallet
    }]);

  if (error) {
    document.getElementById("msg").innerText = error.message;
  } else {
    document.getElementById("msg").innerText = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ (Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©)";
  }
}
</script>
</body>
</html>
